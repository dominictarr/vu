function EventEmitter(){}EventEmitter.prototype={listeners:function(a){return this._events||(this._events={}),this._events[a]=this._events[a]||[]},on:function(a,b){var c=this.listeners(a);if(!~c.indexOf(b))return c.push(b)},emit:function(a){var b=arguments.length-1,c=new Array(b);while(b--)c[b]=arguments[b+1];var d=this.listeners(a);for(var e in d)d[e].apply(null,c)},removeAllListeners:function(a){return a?this._events[a]=null:this._events={}},removeListener:function(a,b){var c=this.listeners(a),d=c.indexOf(b);d!=-1&&c.splice(d,1)}},function(a){function b(a){if("object"==typeof a&&a)return this.set(a)}function d(a){this.array=a||[]}var c=b.prototype=new EventEmitter;c.set=function(a,b){this.store||(this.store={});if("object"==typeof a){for(var c in a)this.set(c,a[c]);return this}var d=this.store[b];return this.emit("change",a,b),this.store[a]=b,this},c.get=function(a){return this.store||(this.store={}),this.store[a]},c.toJSON=function(){return this.store()};var e=Array.prototype,c=d.prototype=new EventEmitter;c.set=function(a,b){return this.array.splice(a,1,b),this.emit("change","set",[a,b]),b},c.get=function(a){return this.array[a]},c.length=function(){return this.array.length},"push,pop,shift,unshift,reverse,sort,splice".split(",").forEach(function(a){var b=e[a];c[a]||(c[a]=function(){var b=arguments.length,c=new Array(b);while(b--)c[b]=arguments[b];var d=e[a].apply(this.array,c);return this.emit("change",a,c),d})}),"forEach,map,reduce,reduceRight,slice,indexOf".split(",").forEach(function(a){var b=e[a];c[a]||(c[a]=function(){var b=arguments.length,c=new Array(b);while(b--)c[b]=arguments[b];return e[a].apply(this.array,c)})}),a.ArrayEmitter=d,a.ArrayModel=d,a.Model=b}(window),function(){function a(a,b,c){function d(b,c){"function"==typeof c?a[b]=c:c!==undefined&&a.setAttribute(b,c)}if("object"==typeof b)for(var e in b)d(e,b[e]);else d(b,c)}function b(c){if(!c)return;var d=c.length,e=0;if("string"==typeof c)return document.createTextNode(c);if("function"==typeof c){var f=c();if("string"==typeof f){var g=f;f=document.createElement("span"),f.innerHTML=g}return f.update=function(){var a=f.parentElement,b=arguments.length,d=new Array(b);while(b--)d[b]=arguments[b];var e=c.apply(this,d);"string"==typeof e?f.innerHTML=e:e instanceof HTMLElement&&(a.replaceChild(e,f),e.update=this.update,f=e)},f}if(c instanceof HTMLElement)return c;var h;if("string"==typeof c[0]){var i=parseClass(c[e++]);h=document.createElement(i.tag),a(h,"id",i.id),a(h,"class",i.classes)}var j=[];if("object"==typeof c[e]&&!Array.isArray(c[e])){var k=c[e++];a(h,k)}while(e<=d){var l=c[e],f=b(l);f&&(h.appendChild(f),f.update&&j.push(f)),e++}return j.length&&(h.update=function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];for(var c in j)j[c].update.apply(j[f],b)}),h}function c(a){var c;return Array.isArray(a)&&(c=b(a)),c}window.parseClass=function(b){var c=b.split(/([\.#]?[a-zA-Z0-9_-]+)/),d={};return c.forEach(function(a){var b=a.substring(1,a.length);if(!a)return;a[0]==="."?d.classes=(d.classes?d.classes+" ":"")+b:a[0]==="#"?d.id=b:d.tag=d.tag||a}),d.tag=d.tag||"div",d},c.replace=function(a,b){var d=a.parentElement,e=c(b);return d.replaceChild(e,a),e},c.br=["br"],c.a=function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];var d=b.pop(),e="object"==typeof b[0]?b.shift():{};return e.onclick=d,e.href=e.href||"#",b.unshift(e),b.unshift("a"),c(b)},c.input=function(a,b,d,e){"function"==typeof d&&(e=d,d={}),e||(e=function(){return!0}),a=parseClass(a);var f=document.createElement(a.tag),g,h=c(["div",{id:a.id,"class":a.classes},["label",b],["input",{type:a.tag,onchange:function(a){var b;try{this.valid=e(this.value)}catch(a){b=a,this.valid=!1}"function"==typeof this.onvalidate&&this.onvalidate(this.valid,b)},onvalidate:function(a,b){g.textContent=a?"":b}}],g=c(["label.message"])]);return h},c.edit=function(a){function g(a,b,c){a.style.setProperty("display","none"),b.style.setProperty("display",c||"inline")}a=a||{};var b=a.value||"",d=a.get||function(){return b},e="function"==typeof a?a:a.set||function(a){b=a},f=a.render||function(a){return document.createTextNode(a)},h,i,j=c(["div",{onclick:function(){j.edit()}},d,i=c(["textarea",{onblur:function(a){e(this.value),j.firstElementChild.update(),g(i,j.firstElementChild)}},b])]);return j.edit=function(){return g(j.firstElementChild,i),i.focus(),i},i.style.setProperty("display","none"),j},window.vu=c}(),function(a){function b(a){if(a instanceof HTMLElement)return a;var b=document.createElement("label");return b.innerHTML=""+a,b}function c(a,c){return a==null?c:(a=b(a),c.parentElement.replaceChild(a,c),a)}function d(a){return function(d){function g(a,c){return e[a]=c||function(a){var c=b(a);return c},f[a]=b(e[a].call(null,d.get(a))),console.log(e),f[a]}var e={},f={},h=a.call(g,d);return h.set=function(a,b){if(!e[a])return;var d=f[a];f[a]=c(e[a].call(d,b),d)},h.get=function(a){if(!f[a])return;return f[a]},d instanceof Model&&d.on("change",function(a,b){h.set(a,b)}),h}}function f(a){function f(a,b){var e=b.length,f=a=="splice"?2:0;while(e-->f)b[e]=c.call(d,b[e]);d[a].apply(d,b)}var c=a.item||"function"==typeof a?a:b,d=document.createElement(a.tag||"ol");a.class&&d.classList.add(a.class),a.id&&d.setAttribute("id",a.id);for(name in e)d[name]=e[name];return d.track=function(a,b){b=b||c,a.on("change",f),a.forEach(function(a){var b=c.call(d,a);b instanceof HTMLElement||console.error(b,"must be instance of HTMLElement"),d.push(b)})},a.track&&d.track(a.track,c),d}var e={push:function(a){return this.appendChild(a),this.childElementCount},pop:function(){var a=this.lastChild;return a&&this.removeChild(a),a},shift:function(){var a=this.firstChild;return a&&this.removeChild(a),a},unshift:function(a){return this.insertBefore(a,this.firstChild),this.childElementCount},reverse:function(){var a=this.childElementCount,b=[];while(a--)b.push(this.shift());while(b.length)this.unshift(b.shift());return this},splice:function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];var c=b.shift(),d=b.shift()||0,e=[];c<0&&(c=0),d<0&&(d=0);while(d--&&c<this.childElementCount)e.push(this.children[c]),this.removeChild(this.children[c]);while(b.length)this.insertBefore(b.shift(),this.children[c]);return e},sort:function(){console.error("sort not implemented yet")},get:function(a){return this.children[a]},set:function(a,b){return this.children[a]=b},length:function(){return this.childElementCount}};a.widget=d,a.List=f,a.widgetArray=f}(window);