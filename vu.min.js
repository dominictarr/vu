function EventEmitter(){}(function(){function a(a){return"object"==typeof a&&!Array.isArray(a)&&!(a instanceof HTMLElement)}function b(c){if(!c)return;if("string"==typeof c)return document.createTextNode(c);if(c instanceof HTMLElement)return c;var d=c.length,e=0,f=utils.tagToElement("string"==typeof c[e]?c[e++]:"div");a(c[e])&&utils.setAttr(f,c[e++]);while(e<=d){var g=b(c[e++]);g&&f.appendChild(g)}return f}window.vu=b})(),EventEmitter.prototype={listeners:function(a){return this._events||(this._events={}),this._events[a]=this._events[a]||[]},on:function(a,b){var c=this.listeners(a);if(!~c.indexOf(b))return c.push(b)},emit:function(a){var b=arguments.length-1,c=new Array(b);while(b--)c[b]=arguments[b+1];var d=this.listeners(a);for(var e in d)d[e].apply(null,c)},removeAllListeners:function(a){return a?this._events[a]=null:this._events={}},removeListener:function(a,b){var c=this.listeners(a),d=c.indexOf(b);d!=-1&&c.splice(d,1)}},function(a){function b(a){if("object"==typeof a&&a)return this.set(a)}function d(a){this.array=a||[]}var c=b.prototype=new EventEmitter;c.set=function(a,b){this.store||(this.store={});if("object"==typeof a){for(var c in a)this.set(c,a[c]);return this}var d=this.store[b];return this.emit("change",a,b),this.store[a]=b,this},c.get=function(a){return this.store||(this.store={}),this.store[a]},c.toJSON=function(){return this.store()};var e=Array.prototype,c=d.prototype=new EventEmitter;c.set=function(a,b){return this.array.splice(a,1,b),this.emit("change","set",[a,b]),b},c.get=function(a){return this.array[a]},c.length=function(){return this.array.length},"push,pop,shift,unshift,reverse,sort,splice".split(",").forEach(function(a){var b=e[a];c[a]||(c[a]=function(){var b=arguments.length,c=new Array(b);while(b--)c[b]=arguments[b];var d=e[a].apply(this.array,c);return this.emit("change",a,c),d})}),"forEach,map,reduce,reduceRight,slice,indexOf".split(",").forEach(function(a){var b=e[a];c[a]||(c[a]=function(){var b=arguments.length,c=new Array(b);while(b--)c[b]=arguments[b];return e[a].apply(this.array,c)})}),a.ArrayEmitter=d,a.ArrayModel=d,a.Model=b}(window),vu.a=function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];var c=b.pop(),d="object"==typeof b[0]?b.shift():{};return d.onclick=c,d.href=d.href||"#",b.unshift(d),b.unshift("a"),vu(b)},vu.input=function(a){return a=a||{},a.type=a.type||"text",a.onchange=a.onchange||function(){model.set(key,this.value)},function(c,d,e){a.value=c;if(this.init)return vu(["input",a]);this.value=c}},vu.edit=function(a){function f(a,b,c){a.style.setProperty("display","none"),b.style.setProperty("display",c||"inline")}a=a||{};var b=a.value||"",c=a.get||function(){return b},d="function"==typeof a?a:a.set||function(a){b=a},e=a.render||function(a){return document.createTextNode(a)},g,h,i=vu(["div",{onclick:function(){i.edit()}},c,h=vu(["textarea",{onblur:function(a){d(this.value),i.firstElementChild.update(),f(h,i.firstElementChild)}},b])]);return i.edit=function(){return f(i.firstElementChild,h),h.focus(),h},h.style.setProperty("display","none"),i},function(a){function b(a){var b=a.split(/([\.#]?[a-zA-Z0-9_-]+)/),c={};return b.forEach(function(a){var b=a.substring(1,a.length);if(!a)return;a[0]==="."?c.classes=(c.classes?c.classes+" ":"")+b:a[0]==="#"?c.id=b:c.tag=c.tag||a}),c.tag=c.tag||"div",c}function c(a){a=b(a);var c=document.createElement(a.tag);return d(c,"id",a.id),d(c,"class",a.classes),c}function d(a,b,c){function d(b,c){"function"==typeof c?a[b]=c:c!==undefined&&a.setAttribute(b,c)}if("object"==typeof b)for(var e in b)d(e,b[e]);else d(b,c)}function e(a){if(a instanceof HTMLElement)return a;var b=document.createElement("label");return b.innerHTML=""+a,b}function f(a,b){return a==null?b:(a=e(a),b.parentElement.replaceChild(a,b),a)}a.parseClass=b,a.tagToElement=c,a.setAttr=d,a.toElement=e,a.replace=f}(window.utils={}),function(a){function b(a){return function(b){function e(a,e){return c[a]=e||function(a){var b=utils.toElement(a);return b},d[a]=utils.toElement(c[a].call({init:!0},b.get(a),a,b)),console.log(c),d[a]}var c={},d={},f=a.call(e,b);return f.set=function(a,e){if(!c[a])return;var f=d[a];d[a]=utils.replace(c[a].call(f,e,a,b),f)},f.get=function(a){if(!d[a])return;return d[a]},b.on("change",function(a,b){f.set(a,b)}),f}}function d(a){function e(a,c){var e=c.length,f=a=="splice"?2:0;while(e-->f)c[e]=b.call(d,c[e]);d[a].apply(d,c)}var b=a.item||("function"==typeof a?a:utils.toElement),d=utils.tagToElement(a.tag||"ol");for(name in c)d[name]=c[name];return d.track=function(a){a.on("change",e),a.forEach(function(a){var c=b.call(d,a);c instanceof HTMLElement||console.error(c,"must be instance of HTMLElement"),d.push(c)})},a.track&&d.track(a.track,item),d}var c={push:function(a){return this.appendChild(a),this.childElementCount},pop:function(){var a=this.lastChild;return a&&this.removeChild(a),a},shift:function(){var a=this.firstChild;return a&&this.removeChild(a),a},unshift:function(a){return this.insertBefore(a,this.firstChild),this.childElementCount},reverse:function(){var a=this.childElementCount,b=[];while(a--)b.push(this.shift());while(b.length)this.unshift(b.shift());return this},splice:function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];var c=b.shift(),d=b.shift()||0,e=[];c<0&&(c=0),d<0&&(d=0);while(d--&&c<this.childElementCount)e.push(this.children[c]),this.removeChild(this.children[c]);while(b.length)this.insertBefore(b.shift(),this.children[c]);return e},sort:function(){console.error("sort not implemented yet")},get:function(a){return this.children[a]},set:function(a,b){return this.children[a]=b},length:function(){return this.childElementCount}};a.widget=b,a.List=d,a.widgetArray=d}(window);